[gd_scene load_steps=20 format=3 uid="uid://cexas7g47wxah"]

[ext_resource type="Script" uid="uid://d20yi1eqkfl88" path="res://scripts/ogon19.gd" id="1_op5ft"]
[ext_resource type="AudioStream" uid="uid://l11uylvhcg71" path="res://assets/audio/sfx/weapons/ogon19/mag2.ogg" id="2_op5ft"]
[ext_resource type="AudioStream" uid="uid://3hddlm8pgkt8" path="res://assets/audio/sfx/weapons/ogon19/mag1.ogg" id="4_op5ft"]
[ext_resource type="AudioStream" uid="uid://cuy8t2bbxgfnb" path="res://assets/audio/sfx/weapons/ogon19/ogon19_slideback.ogg" id="5_akofg"]
[ext_resource type="Material" uid="uid://bmcbupdttg412" path="res://assets/materials/gun_steel.tres" id="6_ogsy1"]
[ext_resource type="PackedScene" uid="uid://b358dp85skiui" path="res://scenes/bullet_9x19.tscn" id="7_akofg"]

[sub_resource type="Animation" id="Animation_buff3"]
length = 0.001
tracks/0/type = "position_3d"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Slide")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = PackedFloat32Array(0, 1, 0, 0.125, -0.145)
tracks/1/type = "position_3d"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("BulletCasing")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = PackedFloat32Array(0, 1, 0, 0.10574759, 0.00867527)

[sub_resource type="Animation" id="Animation_1e3ry"]
resource_name = "prime"
length = 0.1
tracks/0/type = "position_3d"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Slide")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = PackedFloat32Array(0, 1, 0, 0.125, 0, 0.03333333, 1, 0, 0.125, 0, 0.10000001, 1, 0, 0.125, -0.145, 0.13333337, 1, 0, 0.125, -0.145)
tracks/1/type = "method"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath(".")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0.06666667),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [ExtResource("2_op5ft"), 1.0],
"method": &"playsound"
}]
}
tracks/2/type = "method"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath(".")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0.033333335),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [Vector3(-0.3, -0.05, 0), Vector3(-0.1, 0.05, 0)],
"method": &"apply_hard_punch"
}]
}

[sub_resource type="Animation" id="Animation_igbvm"]
resource_name = "reload_1"
length = 0.4
tracks/0/type = "method"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(),
"transitions": PackedFloat32Array(),
"values": []
}
tracks/1/type = "method"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath(".")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0.16666669, 0.20000005),
"transitions": PackedFloat32Array(1, 1),
"values": [{
"args": [ExtResource("4_op5ft"), 1.0],
"method": &"playsound"
}, {
"args": [Vector3(0.01, 0, 0), Vector3(0.05, 0, 0)],
"method": &"apply_punch"
}]
}
tracks/2/type = "position_3d"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("BulletCasing")
tracks/2/interp = 2
tracks/2/loop_wrap = true
tracks/2/keys = PackedFloat32Array(0, 1, 0, 0.106, 1, 0.23333333, 1, 0, 0.3, 0, 0.33333337, 1, 0, 0.1, 0)

[sub_resource type="Animation" id="Animation_8rggj"]
resource_name = "slideback"
length = 0.4
tracks/0/type = "position_3d"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Slide")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = PackedFloat32Array(0, 1, 0, 0.125, -0.145, 0.03333334, 1, 0, 0.125, -0.145, 0.26666668, 1, 0, 0.125, -0.05, 0.4, 1, 0, 0.125, -0.05)
tracks/1/type = "method"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath(".")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0.06666667),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [ExtResource("5_akofg"), 1.0],
"method": &"playsound"
}]
}
tracks/2/type = "method"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath(".")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0.06666667),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [Vector3(-0.3, -0.05, 0), Vector3(-0.1, 0.05, 0)],
"method": &"apply_hard_punch"
}]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_1e3ry"]
_data = {
&"RESET": SubResource("Animation_buff3"),
&"prime": SubResource("Animation_1e3ry"),
&"reload_1": SubResource("Animation_igbvm"),
&"slideback": SubResource("Animation_8rggj")
}

[sub_resource type="BoxMesh" id="BoxMesh_igbvm"]
material = ExtResource("6_ogsy1")
size = Vector3(0.06, 0.2, 0.1)

[sub_resource type="BoxMesh" id="BoxMesh_buff3"]
material = ExtResource("6_ogsy1")
size = Vector3(0.06, 0.06, 0.5)

[sub_resource type="BoxMesh" id="BoxMesh_88qyl"]
material = ExtResource("6_ogsy1")
size = Vector3(0.01, 0.06, 0.005)

[sub_resource type="TorusMesh" id="TorusMesh_1r6mc"]
material = ExtResource("6_ogsy1")
inner_radius = 0.04
outer_radius = 0.05
rings = 6
ring_segments = 3

[sub_resource type="BoxMesh" id="BoxMesh_4hq71"]
material = ExtResource("6_ogsy1")
size = Vector3(0.06, 0.06, 0.5)

[sub_resource type="PrismMesh" id="PrismMesh_br670"]
material = ExtResource("6_ogsy1")
size = Vector3(0.045, 0.02, 0.03)

[sub_resource type="BoxMesh" id="BoxMesh_1e3ry"]
material = ExtResource("6_ogsy1")
size = Vector3(0.03, 0.02, 0.02)

[sub_resource type="CylinderMesh" id="CylinderMesh_igbvm"]
material = ExtResource("6_ogsy1")
top_radius = 0.025
bottom_radius = 0.025
height = 0.5

[node name="Ogon 19" type="Node3D"]
script = ExtResource("1_op5ft")
recoil_amount = 0.05
trigger_time = 0.1

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_1e3ry")
}

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.9894401, 0.14494339, 0, -0.14494339, 0.9894401, 0, -0.03557404, 0.009040136)
mesh = SubResource("BoxMesh_igbvm")

[node name="MeshInstance3D2" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.085, -0.14375493)
mesh = SubResource("BoxMesh_buff3")

[node name="Trigger" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.98478943, -0.17375128, 0, 0.17375128, 0.98478943, 0, 0.04934276, -0.06977304)
mesh = SubResource("BoxMesh_88qyl")

[node name="TriggerGuard" type="MeshInstance3D" parent="."]
transform = Transform3D(-4.371139e-08, -0.9999999, 0, 1, -4.3711385e-08, 0, 0, 0, 0.9999999, 0, 0.037683558, -0.06895141)
mesh = SubResource("TorusMesh_1r6mc")

[node name="Slide" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.125, -0.145)
mesh = SubResource("BoxMesh_4hq71")

[node name="Front" type="MeshInstance3D" parent="Slide"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.038, -0.228)
mesh = SubResource("PrismMesh_br670")
skeleton = NodePath("../..")

[node name="RearLeft" type="MeshInstance3D" parent="Slide"]
transform = Transform3D(-3.7855173e-08, -0.5, -0.8660254, -2.1855694e-08, 0.8660254, -0.5, 1, 0, -4.371139e-08, -0.02, 0.03364697, 0.224)
mesh = SubResource("BoxMesh_1e3ry")
skeleton = NodePath("../..")

[node name="RearRight" type="MeshInstance3D" parent="Slide"]
transform = Transform3D(-3.7855173e-08, 0.5, -0.8660254, 2.1855694e-08, 0.8660254, 0.5, 1, 0, -4.371139e-08, 0.02, 0.03364697, 0.224)
mesh = SubResource("BoxMesh_1e3ry")
skeleton = NodePath("../..")

[node name="CasingPos" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.14698166, -0.07033517)

[node name="MeshInstance3D3" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -4.371139e-08, -1, 0, 1, -4.371139e-08, 0, 0.125, -0.16051233)
mesh = SubResource("CylinderMesh_igbvm")

[node name="RayCast3D" type="RayCast3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.125, -0.4061338)
target_position = Vector3(0, 0, -100)
collide_with_areas = true

[node name="BulletCasing" parent="." instance=ExtResource("7_akofg")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.10574759, 0.00867527)
