[gd_scene load_steps=25 format=3 uid="uid://bj6hvxulhfg7"]

[ext_resource type="Script" uid="uid://dh4r3tkt0qyos" path="res://scripts/gi_mk_1_auto.gd" id="1_rjrv0"]
[ext_resource type="AudioStream" uid="uid://gaxffh1ikwdm" path="res://assets/audio/sfx/weapons/gi_mk1/gi_mk1_sliderelease.wav" id="2_ysls0"]
[ext_resource type="AudioStream" uid="uid://drpaj2h3c6t54" path="res://assets/audio/sfx/weapons/sonorous.wav" id="3_rjrv0"]
[ext_resource type="AudioStream" uid="uid://bjo0pxg0qh0gi" path="res://assets/audio/sfx/weapons/gununloadmag.ogg" id="4_ysls0"]
[ext_resource type="AudioStream" uid="uid://cy5e2ftu12cqx" path="res://assets/audio/sfx/weapons/foley3.wav" id="5_ysls0"]
[ext_resource type="Material" uid="uid://bmcbupdttg412" path="res://assets/materials/gun_steel.tres" id="6_js4ul"]
[ext_resource type="AudioStream" uid="uid://qo4mnua58078" path="res://assets/audio/sfx/weapons/gi_mk1/gi_mk1_mag_in_big.wav" id="6_ysls0"]
[ext_resource type="Material" uid="uid://vfq31ptkijil" path="res://assets/materials/polymer.tres" id="8_rjrv0"]

[sub_resource type="Animation" id="Animation_buff3"]
length = 0.001
tracks/0/type = "position_3d"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Magazine")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = PackedFloat32Array(0, 1, 0, -0.1, 0.02)
tracks/1/type = "position_3d"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Slide")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = PackedFloat32Array(0, 1, 0, 0.125, -0.2)
tracks/2/type = "rotation_3d"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Magazine")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = PackedFloat32Array(0, 1, -0.07266376, 0, 0, 0.9973565)

[sub_resource type="Animation" id="Animation_1e3ry"]
resource_name = "prime"
length = 0.1
tracks/0/type = "position_3d"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Slide")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = PackedFloat32Array(0, 1, 0, 0.125, -0.1, 0.03333333, 1, 0, 0.125, -0.1, 0.10000001, 1, 0, 0.125, -0.2, 0.13333337, 1, 0, 0.125, -0.2)
tracks/1/type = "method"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath(".")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0.06666667),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [ExtResource("2_ysls0"), 1.0],
"method": &"playsound"
}]
}
tracks/2/type = "method"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath(".")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0.033333335, 0.06666667),
"transitions": PackedFloat32Array(1, 1),
"values": [{
"args": [Vector3(-0.3, -0.05, 0), Vector3(-0.1, 0.05, 0)],
"method": &"apply_hard_punch"
}, {
"args": [ExtResource("3_rjrv0"), 0.05],
"method": &"playsound"
}]
}

[sub_resource type="Animation" id="Animation_igbvm"]
resource_name = "reload"
length = 2.0
tracks/0/type = "position_3d"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Magazine")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = PackedFloat32Array(0, 1, 0, -0.1, 0.02, 0.20000002, 1, 0, -2, 0.3, 0.33333334, 1, 0, -2, 0.3, 0.5, 1, 0, 0, 1, 0.73333335, 1, 0, -0.4, 0, 1, 1, 0, -0.45800653, 0.018933576, 1.1666666, 1, 0, -0.35, 0, 1.3371634, 1, 0, -0.4, 0.019, 1.5333333, 1, 0, -0.3, 0.045, 1.6333333, 1, 0, -0.2, 0.035, 1.8333334, 1, 0, -0.1, 0.02)
tracks/1/type = "rotation_3d"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Magazine")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = PackedFloat32Array(0, 1, -0.07266376, 0, 0, 0.9973565, 0.73333335, 1, -0.07266376, 0, 0, 0.9973565, 1.3000001, 1, 0, 0, 0, 1, 1.5333333, 1, -0.07266376, 0, 0, 0.9973565)
tracks/2/type = "method"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath(".")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 1.2, 1.6, 1.9),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"values": [{
"args": [ExtResource("4_ysls0"), 1.0],
"method": &"playsound"
}, {
"args": [ExtResource("5_ysls0"), 1.0],
"method": &"playsound"
}, {
"args": [ExtResource("6_ysls0"), 1.0],
"method": &"playsound"
}, {
"args": [ExtResource("3_rjrv0"), 0.01],
"method": &"playsound"
}]
}
tracks/3/type = "method"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath(".")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(1.18, 1.7666667),
"transitions": PackedFloat32Array(1, 1),
"values": [{
"args": [Vector3(0.05, 0, 0), Vector3(0.01, 0, 0)],
"method": &"apply_punch"
}, {
"args": [Vector3(0.01, 0, 0), Vector3(0.03, 0, 0)],
"method": &"apply_punch"
}]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_1e3ry"]
_data = {
&"RESET": SubResource("Animation_buff3"),
&"prime": SubResource("Animation_1e3ry"),
&"reload": SubResource("Animation_igbvm")
}

[sub_resource type="BoxMesh" id="BoxMesh_igbvm"]
material = ExtResource("6_js4ul")
size = Vector3(0.06, 0.2, 0.1)

[sub_resource type="BoxMesh" id="BoxMesh_buff3"]
material = ExtResource("6_js4ul")
size = Vector3(0.06, 0.06, 0.5)

[sub_resource type="BoxMesh" id="BoxMesh_t6oaa"]
material = ExtResource("8_rjrv0")
size = Vector3(0.04, 0.4, 0.08)

[sub_resource type="BoxMesh" id="BoxMesh_88qyl"]
material = ExtResource("6_js4ul")
size = Vector3(0.01, 0.06, 0.005)

[sub_resource type="TorusMesh" id="TorusMesh_1r6mc"]
material = ExtResource("6_js4ul")
inner_radius = 0.04
outer_radius = 0.05
rings = 6
ring_segments = 3

[sub_resource type="BoxMesh" id="BoxMesh_4hq71"]
material = ExtResource("6_js4ul")
size = Vector3(0.06, 0.06, 0.5)

[sub_resource type="BoxMesh" id="BoxMesh_1e3ry"]
material = ExtResource("6_js4ul")
size = Vector3(0.03, 0.02, 0.02)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_igbvm"]
emission_enabled = true
emission = Color(0, 1, 0, 1)

[sub_resource type="CylinderMesh" id="CylinderMesh_1e3ry"]
material = SubResource("StandardMaterial3D_igbvm")
top_radius = 0.008
bottom_radius = 0.008
height = 0.01

[sub_resource type="CylinderMesh" id="CylinderMesh_buff3"]
material = SubResource("StandardMaterial3D_igbvm")
top_radius = 0.005
bottom_radius = 0.005
height = 0.01

[sub_resource type="CylinderMesh" id="CylinderMesh_igbvm"]
material = ExtResource("6_js4ul")
top_radius = 0.025
bottom_radius = 0.025
height = 0.5

[sub_resource type="BoxMesh" id="BoxMesh_pqr04"]
material = ExtResource("6_js4ul")
size = Vector3(0.1, 0.1, 0.16)

[node name="GI mk 1 auto" type="Node3D"]
script = ExtResource("1_rjrv0")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_1e3ry")
}

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.9894401, 0.14494339, 0, -0.14494339, 0.9894401, 0, -0.03557404, 0.009040136)
mesh = SubResource("BoxMesh_igbvm")

[node name="MeshInstance3D2" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.085, -0.198)
mesh = SubResource("BoxMesh_buff3")

[node name="Magazine" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.98943985, 0.14494333, 0, -0.14494333, 0.98943985, 0, -0.1, 0.02)
mesh = SubResource("BoxMesh_t6oaa")

[node name="Trigger" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.98478943, -0.17375128, 0, 0.17375128, 0.98478943, 0, 0.04934276, -0.06977304)
mesh = SubResource("BoxMesh_88qyl")

[node name="TriggerGuard" type="MeshInstance3D" parent="."]
transform = Transform3D(-4.371139e-08, -0.9999999, 0, 1, -4.3711385e-08, 0, 0, 0, 0.9999999, 0, 0.037683558, -0.06895141)
mesh = SubResource("TorusMesh_1r6mc")

[node name="Slide" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.125, -0.2)
mesh = SubResource("BoxMesh_4hq71")

[node name="Front" type="MeshInstance3D" parent="Slide"]
transform = Transform3D(-4.371139e-08, 0, 1, 0, 1, 0, -1, 0, -4.371139e-08, 0, 0.039107382, -0.22810106)
mesh = SubResource("BoxMesh_1e3ry")
skeleton = NodePath("../..")

[node name="Glow" type="MeshInstance3D" parent="Slide/Front"]
transform = Transform3D(-4.371139e-08, 1, -4.371139e-08, 0, -4.371139e-08, -1, -1, -4.371139e-08, 1.9106855e-15, -0.012, 0.001, 0)
mesh = SubResource("CylinderMesh_1e3ry")

[node name="RearLeft" type="MeshInstance3D" parent="Slide"]
transform = Transform3D(-4.371139e-08, 0, -1, 0, 1, 0, 1, 0, -4.371139e-08, -0.02, 0.039000005, 0.224)
mesh = SubResource("BoxMesh_1e3ry")
skeleton = NodePath("../..")

[node name="Glow" type="MeshInstance3D" parent="Slide/RearLeft"]
transform = Transform3D(-4.371139e-08, 1, -4.371139e-08, 0, -4.371139e-08, -1, -1, -4.371139e-08, 1.9106855e-15, 0.012, 0.005, -0.005)
mesh = SubResource("CylinderMesh_buff3")

[node name="RearRight" type="MeshInstance3D" parent="Slide"]
transform = Transform3D(-4.371139e-08, 0, -1, 0, 1, 0, 1, 0, -4.371139e-08, 0.02, 0.039000005, 0.224)
mesh = SubResource("BoxMesh_1e3ry")
skeleton = NodePath("../..")

[node name="Glow" type="MeshInstance3D" parent="Slide/RearRight"]
transform = Transform3D(-4.371139e-08, 1, -4.371139e-08, 0, -4.371139e-08, -1, -1, -4.371139e-08, 1.9106855e-15, 0.012, 0.005, 0.005)
mesh = SubResource("CylinderMesh_buff3")

[node name="CasingPos" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.12964264, -0.041284323)

[node name="MeshInstance3D3" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -4.371139e-08, -1, 0, 1, -4.371139e-08, 0, 0.125, -0.20967716)
mesh = SubResource("CylinderMesh_igbvm")

[node name="MeshInstance3D4" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.125, -0.5345871)
mesh = SubResource("BoxMesh_pqr04")

[node name="RayCast3D" type="RayCast3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.125, -0.44574142)
target_position = Vector3(0, 0, -100)
collide_with_areas = true
